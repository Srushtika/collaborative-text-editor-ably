(function(){"use strict";var t={839:function(t,e,r){var o=r(144),a=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("Container")],1)},n=[],s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"grid grid-cols-5"},[e("TextEditor",{staticClass:"col-span-3"}),e("CodeSnippet",{staticClass:"col-span-2"})],1)},i=[],l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bg-white text-left p-2.5 font-ui-sans-serif mx-11",on:{mousemove:t.mouseMove}},[e("AvatarStack"),e("Cursors"),e("div",{staticClass:"text-4xl font-black p-2 hover:bg-gray-100 border border-transparent",staticStyle:{outline:"0px solid transparent"},attrs:{id:"header-h1",contenteditable:""},on:{focus:function(e){return t.setBlockLocation(e)}}},[t._v(" 👩🏻‍💻 Collaborative block text editor ")]),e("hr",{staticClass:"h-px my-8 bg-gray-300 border-1 dark:bg-gray-300"}),e("div",{staticClass:"text-3xl font-bold p-2 hover:bg-gray-100 border border-transparent",staticStyle:{outline:"0px solid transparent"},attrs:{id:"header-h2-1",contenteditable:""},on:{focus:function(e){return t.setBlockLocation(e)}}},[t._v(" Get started ")]),e("div",{staticClass:"text-lg p-2 hover:bg-gray-100 border border-transparent",staticStyle:{outline:"0px solid transparent"},attrs:{id:"body-1",contenteditable:""},on:{focus:function(e){return t.setBlockLocation(e)}}},[t._v(" 👋 Welcome! This is a demo text editor powered by Ably's Realtime Collaboration SDK. Open another instance of this in a new tab and explore the multiplayer collaboration features. ")]),e("div",{staticClass:"text-lg p-2 hover:bg-gray-100 border border-transparent",staticStyle:{outline:"0px solid transparent"},attrs:{id:"body-2",contenteditable:""},on:{focus:function(e){return t.setBlockLocation(e)}}},[t._v(" Available features: "),t._m(0)]),e("hr",{staticClass:"h-px my-8 bg-gray-300 border-1 dark:bg-gray-300"}),e("div",{staticClass:"text-3xl font-bold p-2 hover:bg-gray-100 border border-transparent",staticStyle:{outline:"0px solid transparent"},attrs:{id:"header-h2-2",contenteditable:""},on:{focus:function(e){return t.setBlockLocation(e)}}},[t._v(" TODOs ")]),e("div",{staticClass:"text-lg pl-2 hover:bg-gray-100 flex items-center border border-transparent",staticStyle:{outline:"0px solid transparent"},attrs:{id:"chk-1",contenteditable:""},on:{focus:function(e){return t.setBlockLocation(e)}}},[e("input",{staticClass:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600",staticStyle:{outline:"0px solid transparent"},attrs:{id:"checkbox-1",type:"checkbox",value:""}}),e("label",{staticClass:"ml-2 checkbox-1",attrs:{for:"checkbox-1"}},[t._v("Tried the demo")])]),e("div",{staticClass:"text-lg pl-2 hover:bg-gray-100 flex items-center border border-transparent",staticStyle:{outline:"0px solid transparent"},attrs:{id:"chk-2",contenteditable:""},on:{focus:function(e){return t.setBlockLocation(e)}}},[e("input",{staticClass:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600",staticStyle:{outline:"0px solid transparent"},attrs:{checked:"",id:"checkbox-2",type:"checkbox",value:""}}),e("label",{staticClass:"ml-2 checkbox-1",attrs:{for:"checkbox-2"}},[t._v("Checked out the GitHub repo")])]),e("div",{staticClass:"text-lg pl-2 hover:bg-gray-100 flex items-center border border-transparent",staticStyle:{outline:"0px solid transparent"},attrs:{id:"chk-3",contenteditable:""},on:{focus:function(e){return t.setBlockLocation(e)}}},[e("input",{staticClass:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600",staticStyle:{outline:"0px solid transparent"},attrs:{id:"checkbox-3",type:"checkbox",value:""}}),e("label",{staticClass:"ml-2 checkbox-1",attrs:{for:"checkbox-3"}},[t._v("Signed up to Ably")])])],1)},c=[function(){var t=this,e=t._self._c;return e("ul",{staticClass:"list-disc pl-5"},[e("li",[t._v("Avatar Stack")]),e("li",[t._v("User in-app location")]),e("li",[t._v("Live cursors")]),e("li",[t._v("Field locking")]),e("li",[t._v("Live app updates")])])}],d=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-5 font-sans"},[e("div",{staticClass:"flex -space-x-2 justify-end"},t._l(t.collabMembersArr,(function(r){return e("div",{key:r.clientId,staticClass:"relative inline-flex items-center justify-center w-10 h-10 ring-2 ring-white rounded-full",class:r.isConnected?t.bgColours[r.profileData.avatarColour]:"bg-gray-500"},[e("span",{staticClass:"font-medium text-white dark:text-white"},[t._v(t._s(r.profileData.initials))]),r.isConnected?e("span",{staticClass:"bottom-0 right-7 absolute w-2 h-2 bg-green-600 ring-2 ring-white dark:border-gray-800 rounded-full"}):t._e()])})),0)])},u=[],b=r(629),p={name:"AvatarStack",data(){return{collabMembersArr:[],bgColours:{red:"bg-red-400",orange:"bg-orange-400",green:"bg-green-400",amber:"bg-amber-400",lime:"bg-lime-400",cyan:"bg-cyan-400",blue:"bg-blue-400",indigo:"bg-indigo-400"}}},computed:{...(0,b.Se)(["getCollabMembers"])},watch:{getCollabMembers:function(t){console.log("RECEIVED MESSAGE IN COMPONENT",t),this.collabMembersArr=t}}},g=p,f=r(1),h=(0,f.Z)(g,d,u,!1,null,null,null),m=h.exports,v=function(){var t=this,e=t._self._c;return e("div",[e("p",[t._v("sldkfj")]),e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:t.width,height:t.height,viewBox:"0 0 18 18","aria-labelledby":t.iconName,role:"presentation"}},[e("title",{attrs:{id:t.iconName,lang:"en"}},[t._v(t._s(t.iconName)+" icon")]),e("g",{attrs:{fill:t.iconColor}},[t._t("default")],2)])])},C=[],y={name:"Cursors",data(){return{iconName:"box",width:18,height:18,iconColor:"red"}}},x=y,k=(0,f.Z)(x,v,C,!1,null,null,null),_=k.exports,S={name:"TextEditor",data(){return{locationUpdate:null,borderColours:{red:"border-red-400",orange:"border-orange-400",green:"border-green-400",amber:"border-amber-400",lime:"border-lime-400",cyan:"border-cyan-400",blue:"border-blue-400",indigo:"border-indigo-400"}}},computed:{...(0,b.Se)(["getLocationUpdate"])},watch:{getLocationUpdate:function(t){console.log("CLASS UPDATE CALLED",t);const e=document.getElementById(t.currentLocation.divId),r=document.getElementById(t.previousLocation.divId),o=t.member.profileData.avatarColour,a=this.borderColours[o];t.currentLocation.divId!=t.previousLocation.divId?(e.classList.replace("border-transparent",a),r.classList.replace(a,"border-transparent")):e.classList.replace("border-transparent",a)}},methods:{...(0,b.nv)(["setBlockLocation","setCursorLocation"]),mouseMove(t){}},components:{AvatarStack:m,Cursors:_}},w=S,L=(0,f.Z)(w,l,c,!1,null,null,null),A=L.exports,M=function(){var t=this;t._self._c;return t._m(0)},I=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"bg-gray-400"},[e("p",[t._v("Placeholder for background info")])])}],T={name:"CodeSnippet",data(){return{}}},O=T,U=(0,f.Z)(O,M,I,!1,null,null,null),E=U.exports,B={name:"Container",data(){return{}},components:{TextEditor:A,CodeSnippet:E}},Z=B,P=(0,f.Z)(Z,s,i,!1,null,null,null),j=P.exports,D={name:"App",data(){return{msg:null}},created(){this.btnText="Creating your watch party...",this.isCreatingRoom=!0,this.isAdmin=!0,this.instantiateAbly({username:"Srush",isAdmin:!0})},components:{Container:j},methods:{...(0,b.nv)(["instantiateAbly"])}},N=D,R=(0,f.Z)(N,a,n,!1,null,null,null),G=R.exports,F=r(182),H=r(579);o.ZP.use(b.ZP);var K=new b.ZP.Store({state:{ablyClient:null,spaceClient:null,myClientId:null,collabSpace:null,allAvatarColours:["red","orange","green","amber","lime","cyan","blue","indigo"],collabMembers:[],locationUpdate:{},pointer:null},getters:{getAblyClient:t=>t.ablyClient,getSpaceClient:t=>t.spaceClient,getMyClientId:t=>t.myClientId,getCollabSpace:t=>t.collabSpace,getCollabMembers:t=>t.collabMembers,getLocationUpdate:t=>t.locationUpdate},mutations:{setAblyClient(t,e){t.ablyClient=e},setSpaceClient(t,e){t.spaceClient=e},setCollabSpace(t,e){t.collabSpace=e},setMyClientId(t,e){t.myClientId=e},setCollabMembers(t,e){t.collabMembers=e},setLocationUpdate(t,e){t.locationUpdate=e}},actions:{instantiateAbly(t){const e=new F.Realtime({authUrl:"http://localhost:8082/auth-ably"});e.connection.once("connected",(()=>{const r=new H.Z(e),o=r.get("text-editor");t.commit("setAblyClient",e),t.commit("setSpaceClient",r),t.commit("setCollabSpace",o),t.commit("setMyClientId",e.auth.clientId),t.state.collabSpace.enter({username:t.state.myClientId,initials:t.state.myClientId.slice(-2).toUpperCase(),avatarColour:t.state.allAvatarColours[Math.floor(Math.random()*t.state.allAvatarColours.length)]}),t.dispatch("subscribeToMembers"),t.dispatch("subscribeToLocations"),t.dispatch("subscribeToCursors")}))},subscribeToMembers(t){t.state.collabSpace.on("membersUpdate",(e=>{t.commit("setCollabMembers",e),console.log("Total user count",t.state.collabMembers.length,"Members:",t.state.collabMembers[0].location)}))},subscribeToLocations(t){t.state.collabSpace.locations.on("locationUpdate",(e=>{t.commit("setLocationUpdate",e)}))},setBlockLocation(t,e){t.state.collabSpace.locations.set({divId:e.target.id})},subscribeToCursors(t){t.state.pointer=t.state.collabSpace.cursors.get("pointer"),t.state.collabSpace.cursors.on("cursorsUpdate",(t=>{console.log(t)}))},setCursorLocation(t,e,r){t.state.pointer.set({position:{x:e,y:r},data:{color:"red"}})}}});o.ZP.config.productionTip=!1,new o.ZP({store:K,render:t=>t(G)}).$mount("#app")}},e={};function r(o){var a=e[o];if(void 0!==a)return a.exports;var n=e[o]={exports:{}};return t[o](n,n.exports,r),n.exports}r.m=t,function(){var t=[];r.O=function(e,o,a,n){if(!o){var s=1/0;for(d=0;d<t.length;d++){o=t[d][0],a=t[d][1],n=t[d][2];for(var i=!0,l=0;l<o.length;l++)(!1&n||s>=n)&&Object.keys(r.O).every((function(t){return r.O[t](o[l])}))?o.splice(l--,1):(i=!1,n<s&&(s=n));if(i){t.splice(d--,1);var c=a();void 0!==c&&(e=c)}}return e}n=n||0;for(var d=t.length;d>0&&t[d-1][2]>n;d--)t[d]=t[d-1];t[d]=[o,a,n]}}(),function(){r.d=function(t,e){for(var o in e)r.o(e,o)&&!r.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};r.O.j=function(e){return 0===t[e]};var e=function(e,o){var a,n,s=o[0],i=o[1],l=o[2],c=0;if(s.some((function(e){return 0!==t[e]}))){for(a in i)r.o(i,a)&&(r.m[a]=i[a]);if(l)var d=l(r)}for(e&&e(o);c<s.length;c++)n=s[c],r.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return r.O(d)},o=self["webpackChunkapp_collaborative_text_editor_vue"]=self["webpackChunkapp_collaborative_text_editor_vue"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=r.O(void 0,[998],(function(){return r(839)}));o=r.O(o)})();
//# sourceMappingURL=app.508aacd1.js.map